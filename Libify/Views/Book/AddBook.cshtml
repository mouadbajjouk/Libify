@model Libify.Models.BookModel

@inject Libify.Repository.ILanguageRepository _langRepo

@{ 
	ViewData["Title"] = "Add new book";
}

<div class="container-fluid">
	<div class="row">
		<div class="col"></div>

		<div class="col-md-8 my-5">
			<h1 class="display-4 text-center">Add a book</h1>

			@if (ViewBag.isSuccess == true)
			{
				<div class="alert alert-success alert-dismissible fade show" role="alert">
					<strong>Book added succesfully!</strong> <a asp-controller="Book" asp-action="GetBook" asp-route-id="@ViewBag.bookId">Click here to see details.</a>
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
			}

		<form method="post" enctype="multipart/form-data" asp-controller="Book" asp-action="AddBook">
			<div class="form-group">

				<label asp-for="Name"></label>
				<input class="form-control" asp-for="Name">
				<span asp-validation-for="Name" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="Author"></label>
				<input class="form-control" asp-for="Author">
				<span asp-validation-for="Author" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="LanguageId"></label>
				<select class="form-control" asp-for="LanguageId" asp-items="(await _langRepo.GetLanguages()).Select(x => new SelectListItem() { Text = x.Name, Value = x.Id.ToString()})">
				</select>
				<span asp-validation-for="LanguageId" class="text-danger"></span>
			</div>
			<div class="form-group">

				<label asp-for="Category"></label>
				<input class="form-control" asp-for="Category">
				<span asp-validation-for="Category" class="text-danger"></span>
			</div>
			<div class="form-group">

				<label asp-for="Quantity"></label>
				<input class="form-control" asp-for="Quantity">
				<span asp-validation-for="Quantity" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="Pages"></label>
				<input class="form-control" asp-for="Pages">
				<span asp-validation-for="Pages" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="CoverImage"></label>
				<input class="form-control" asp-for="CoverImage">
				<span asp-validation-for="CoverImage" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="GalleryFiles"></label>
				<input class="form-control" asp-for="GalleryFiles">
				<span asp-validation-for="GalleryFiles" class="text-danger"></span>
			</div>

			<div class="form-group">

				<label asp-for="PDFFile"></label>
				<input class="form-control" asp-for="PDFFile">
				<span asp-validation-for="PDFFile" class="text-danger"></span>
			</div>
			<div class="form-group">

				<label asp-for="Description"></label>
				<textarea class="form-control" asp-for="Description" rows="10"></textarea>
				<span asp-validation-for="Description" class="text-danger"></span>
			</div>

			<input type="submit" value="Add Book" class="btn btn-primary" />
		</form>
		</div>

		<div class="col"></div>
	</div>
</div>